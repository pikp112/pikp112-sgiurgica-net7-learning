@page "/dentists"
@using WhiteDentalClinic.Application.Models;
@using WhiteDentalClinic.Shared;
@inject HttpClient Http
@using System.Text.Json;


<PageTitle>Dentists</PageTitle>

<h1>Dentists</h1>

<p>This component demonstrates fetching data from the server.</p>

@if (dentists == null)
{
    <p><em>No dentists found.</em></p>
}
else
{
@*        <div class="col-lg-12 control-section">
        <div class="content-wrapper">
            <div class="row">
                <SfGrid @ref="Grid" DataSource="@GridData" AllowFiltering="true" AllowPaging="true">
                    <GridColumns>
                        <GridColumn Field=@dentist.Id HeaderText="Dentist Id" Width="120"></GridColumn>
                        <GridColumn Field=@dentist.FirstName HeaderText="First Name" Width="150"></GridColumn>
                    </GridColumns>
                </SfGrid>
            </div>
        </div>
    </div>
*@
    <table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>First name</th>
                <th>Last name</th>
                <th>Age</th>
                <th>Email</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var dentist in dentists)
            {
                <tr>
                    <td>@dentist.Id</td>
                    <td>@dentist.FirstName</td>
                    <td>@dentist.LastName</td>
                    <td>@dentist.Age</td>
                    <td>@dentist.Email</td>
                </tr>
            }
        </tbody>
    </table>
}

@code {
    private List<DentistResponseModel> dentists = new List<DentistResponseModel>();

    protected override async Task OnInitializedAsync()
    {
        var temp = await Http.GetFromJsonAsync<ApiResult<IEnumerable<DentistResponseModel>>>("api/Dentists/all");
        dentists = temp.Result.ToList();
    }

    public class DentistResponseModel
    {
        public Guid Id { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public int Age { get; set; }
        public string Email { get; set; }

    }
}
